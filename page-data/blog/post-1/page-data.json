{"componentChunkName":"component---src-templates-blog-post-js","path":"/blog/post-1","result":{"data":{"markdownRemark":{"html":"<p>이 시리즈는 츠토무 토네가 쓴 성공과 실패를 결정하는 1%의 네트워크 원리를 읽고 공부한 내용을 정리한 것으로,\n유저가 브라우저에 URL을 입력한 후에 원했던 화면이 보이기까지 어떤 단계를 거치는지를 살펴본다.</p>\n<p><a href=\"https://choichoikule.github.io/blog/post-1\">유저가 브라우저에 URL을 입력한 후 벌어지는 일들 -1</a><br>\n<a href=\"https://choichoikule.github.io/blog/post-7\">유저가 브라우저에 URL을 입력한 후 벌어지는 일들 -2</a></p>\n<h1>Step1. URL을 분석한다</h1>\n<p>유저는 크롬,사파리와 같은 브라우저를 열고 주소창에 <a href=\"http://https://choichoikule.github.io/%EC%99%80\">http://https://choichoikule.github.io/와</a> 같은 주소를 입력한다.\n이러한 주소를 url이라고 하며 유저가 원하는 인터넷 사이트를 나타내는 주소이다. 유저는 주소를 입력함으로써 원하는 것을 불러온다.</p>\n<h3>URL이란</h3>\n<p>좀더 자세하게 이 url이란 것을 살펴볼 필요가 있을 것 같다. 모든 이해는 자세한 정의에서 출발하니까.<br>\nurl의 사전적 정의를 찾아보면 다음과 같다. Uniform Resource Locator(URL)은 인터넷 자원의 위치를 나타내는 것으로, 웹에 게시된 어떤 자원을 찾기위해\n브라우저에 의해 사용되는 메카니즘이다. 어렵게 적혀 있지만 쉡게 말하면 그냥 브라우저가 사용하는 주소체계이다. 이 url은 단순한 문자열 나열이 아니라,\nprotocol + domain + port + path + parameter + fragment 의 순서대로 각각 의미를 담은 요소로 이루어져 있다.</p>\n<p>protocol은 사용자가 입력한 자원 위치에서 자원을 가져오기 위해 브라우저가 어떤 프로토콜을 사용해야하는지 명시하는 것이다.\n흔히 보는 URL 주소에서 http:// 부분을 말한다. 대부분 http프로토콜을 사용해 웹 페이지를 가져오는 용도로 브라우저를 사용하기 때문에\n이외에 다른 것이 있다는 게 낯설지만, 브라우저에 ftp:// mailto://등의 프로토콜을 입력하여 파일업로드나 메일 송신등을 지시할 수도 있다.</p>\n<p>domain은 웹서버이름을 나타내며, path는 웹서버상의 자원위치를 의미한다. 물리적인 위치를 나타낼수도 있지만 대부분 웹서버에서 추상화하여 표현한다.\nparameter는 웹서버에 제공하는 추가 파라미터로, 이 파라미터들은 &#x26; 기호로 구분된 키/값으로 짝을 이룬 리스트이다.\nfragment는 일종의 자원 안에서 \"bookmark\" 로 해당 위치로 스크롤되며 해당 부분은 서버로 요청이 보내지지 않는다.</p>\n<!-- 위에서 잠깐 언급했듯이 인터넷상의 자원들은 숫자로 이루어진 실질적인 주소인 IP 주소라는 것을 가지고 있다. 이러한 숫자들을 외우는 것보다 문자로된 이름을 지어 명명하는 것이 편하기 때문에 domain을 사용하지만\n이 domain이름만으로는\n## IP주소체계\n\nTCP/IP 네트워크는 서브넷이라는 작은단위의 네트워크를 라우터로 연결하여 전체 네트워크를 완성하는데 네트워크의 번호와\n호스트 번호를 합쳐서 IP주소라고 한다.\nIPv4체계에서 IP 주소는 32비트의 디지털 데이터로, 8비트씩 점으로 구분하여 10진수로 표기한다.\n네트워크 주소 영역이 어디까지인지에 따라 IP주소를 클래스로 구분할 수 있고, 해당 클래스에 따라 기본 서브넷 마스크가 주어진다.\n기본 서브넷 마스크는 네트워크 주소부분의 비트를 1로, 호스트부분의 비트를 0으로 표시하며, IP 주소와 서브넷 마스크를 AND 연산 하면 네트워크 주소를 구할 수 있다.\n보안과 효율을 위해 호스트 번호 구간을 분할하여 서브네트워크를 만들어서 사용할 수도 있다. -->\n<p>위에서 domain이 웹서버 이름이라고 하였는데, 실제로는 이 domain이름만으로는 인터넷 자원을 찾아올 수가 없다. 왜냐하면, url을 입력해서 무언가를 인터넷으로부터 불러온다는 것은 내 컴퓨터에 있지 않은,\n네트워크로 연결된 어떠한 다른 장치에 있는 자원을 가져오는 것인데, 네트워크 상에서 연결된 이 각각의 장치들은 도메인과 같은 문자열로된 이름이 아니라 특수한 번호를 가지고 식별되기 때문이다.\n이러한 특수한 번호를 IP주소라고 하며 유저가 입력하는 도메인 이름은 이러한 IP주소와 매칭되어 할당되므로 웹브라우저에 도메인을 입력하면, 브라우저가 IP주소와 도메인 이름의 매칭정보를 가지고 있는 Domain Name System(DNS)서버를 조회하여 맞는 IP주소를 찾아서 인터넷 자원을 가져오게된다. (DNS 서버역시 하나의 서버이므로 이 시리즈 내용의 전체를 아우르는 네트워크 통신이 필요하다. 지금은 상세한 과정을 생략하기로하고 나중에 뒤에서 다시 설명하겠다.)</p>\n<!-- ### DNS서버를 조회하여 IP 주소 알아내기\n\nDNS서버 역시 하나의 서버이므로 네트워크를 통해 데이터를 주고받는 과정이 필요하다.\n데이터를 보내는 것은 어플리케이션의 단일 동작만으로는 불가능하며 컴퓨터 운영체제내부의 네트워크 제어 시스템이 함께 동작해야한다. 이 과정이 바로 그 유명한 OSI 7계층으로 표현된다.\nDNS서버에 IP주소를 요청하기 위한 메세지 작성은 DNS 리졸버라고 하는 것이 담당하므로 브라우저는 리졸버를 호출하여 메세지 작성을 의뢰하고, 리졸버의 메세지가 전송되어 DNS서버로부터 응답이 오면 실제 IP주소를 알게된다고만 정리하고 다음 내용으로 넘어가겠다. -->\n<p>웹브라우저는 데이터를 전기신호로 변환하고 보낼 수 있는 능력은 없으므로 실제 IP주소를 알아낸 브라우저가 다음으로 하는 일은 TCP/IP와 같은 전송계층에게 메세지 전송을 의뢰하는 것이다.\nTCP/IP와 같은 전송계층은 시스템 운영체제 안에 구현되어 있어 직접 이용할 수 없으므로 브라우저는 운영체제가 제공하는 소켓 인터페이스를 통해 시스템 콜 함수로 동작을 의뢰하게된다.\n그 과정을 다음으로 살펴보자.</p>\n<h1>step2 Request 송신을 의뢰한다</h1>\n<p>TCP와 IP는 전송계층으로 데이터를 전송할때 사용되는 프로토콜이다. IP는 인터넷상에서 한 호스트에서 다른 호스트로 데이터 묶음인 패킷을 보낼때 사용되는 프로토콜이며,\nTCP는 IP 상위의 프로토콜로 네트워크 상의 두 종착지 프로세스 간의 통신을 제어하며 IP 프로토콜로 보내진 데이터들이 순서에 맞게 오류없이 조립되어 어플리케이션에 전달될 수 있도록 한다.\n각각의 프로토콜을 거칠때마다 헤더가 붙게되며 그 헤더를 주고 받아서 각 계층에서 서로를 인식하고 정상적을 작동하게된다.</p>\n<p>어플리케이션이 TCP/IP에 데이터 전송을 의뢰하면, TCP는 소켓을 만들고, 서버소켓과 접속하여 데이터를 기록하여 어플리케이션에 응답결과를 반환하고, 연결을 종료한다.\n소켓이란 네트워크상에서 프로세스간 통신의 종착점을 의미하며 소켓의 실체는 통신에 필요한 제어정보를 기록한 컴퓨터의 메모리영역이라고 할 수 있다.\n하나의 컴퓨터 내부에서 소켓은 디스크럽터라는 식별자를 어플리케이션에 넘겨주어 컴퓨터 내부에 다수로 존재하는 소켓중에 어떤 소켓을 확인해야하는지 알려준다.\n그러나 이 디스크럽터는 내부에서 쓰이는 것이므로 외부에서는 알 수 없다. 그렇다면 어떻게 서버소켓에 접속하는 것일까? 우리는 앞서 url에 포트번호가 사용되는 것을 보았다. 포트번호는 호스트 내부의 프로세스가 할당받는 고유한 값이므로\n포트번호를 입력하면 우리의 데이터를 제공할 서버프로세스를 특정짓게 되고 그 프로세스가 관리하는 소켓에 접속할 수 있게 되는 것이다. 소켓과 포트는 다르다.<br>\n커맨드창에서 netstat 명령을 실행했을때 현재 컴퓨터에 존재하는 소켓의 내용을 확인해볼 수 있다.</p>\n<p><strong>socket()단계</strong><br>\n어플리케이션 -> socket()호출 -> TCP 소켓만듬 : 메모리영역을 확보하고, 초기상태를 기록함\n-> 소켓의 식별자인 디스크럽터를 어플리케이션에 알림<br>\n<strong>connect()단계</strong><br>\n어플리케이션 -> connect()호출 -> TCP 서버소켓에 접속: tcp헤더를 주고받아서 서로가 확인되면 데이터 저장용 버퍼 메모리를 확보한다.\ntcp헤더는 다음과 같은 정보를 담고 있고 각 부분의 내용에 따라 작동한다.\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1200px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 33.33333333333333%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAAsTAAALEwEAmpwYAAABM0lEQVQY0yWO65KDIAxGff9X6+1Hb7pdL4gICAiogKJtN+3OnGHC5CT5EkSEMs45r80wTm5yYZz8MLqW8jT9kVLDVxsLrS/eDiOYdnBhXpJbVhWIgYob2jS0rHBR4go1mFDeKUxY3VBUk7yob/fskVdFhfMCgaN6k5CWCani+pyXFZapXkOAJa4+zJRx0tJOSKghEWha23mJ0AUzxjWpMVyQk/PfzH4cHcSHFajGeVkRmGaf7c6Hf2AM8N/pBAJzoaQ2TKoKNy0XrJOgy94YiLA9t/cbCEvkEjQ7rxsQ4hbXLSlRIyjbxmnWJvSalmWHm0FIQPPOdmKEuhOkKNuy4gjpli7WBq2j8wkirH/8vtL7lt5fWebPZ3U4AOZ00sejOuzh/RT7vdztwuXyTNMP1+vG+R8qYYKDNVMTOAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"tcp-header\"\n        title=\"tcp-header\"\n        src=\"/static/ac2748bc9ccf18835b0ee69bb61e8653/c1b63/tcp-header.png\"\n        srcset=\"/static/ac2748bc9ccf18835b0ee69bb61e8653/5a46d/tcp-header.png 300w,\n/static/ac2748bc9ccf18835b0ee69bb61e8653/0a47e/tcp-header.png 600w,\n/static/ac2748bc9ccf18835b0ee69bb61e8653/c1b63/tcp-header.png 1200w,\n/static/ac2748bc9ccf18835b0ee69bb61e8653/21b4d/tcp-header.png 1280w\"\n        sizes=\"(max-width: 1200px) 100vw, 1200px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>이과정은 TCP 3way-handshake라고 불리는 과정이다.\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 47%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsTAAALEwEAmpwYAAABh0lEQVQoz11RXUvDMBTtj/Mn7Vf45pMvCjosyvRBHYiomzidymBFnc6pG3Nr06Zpm7TpR5J+WKNTKR4OIeTcm8M9V/n4RZYXZVke9qfr58OyAinJU9O0er2OMf57kVCqdWXKtjtPS8snjPOvooqyublRq9Vms5m8F0Wx8FNsTCWhFzh+5NMQGnMEzaLSV3z7NJtNVVWzLKt6KRsXo7XW48p+d+tmOgEIE2ITGsSM0FiSxkwInqep4AwAID3DOJGMEhbFiTIYz7XnSe9+OBjrJKA2tP0wCRNBY04TTiKme5HhxY9zx0KugfDOzevq4eXqQUftPCknA3D8YBxp761nJI2BZY4MKEeAchwSQhK6fii/czDVdcNE3vnDtH03Pu4Nz/ojZa9922hd75xeHXS1yUxHDgIugoFrEmT5jqTtO0EcWJ6tA/0v55+ZX7q7g7Y6vNh+6zawPbeRkwqR53n2C5GmEU+g73oEf0f9ISNcUBFZzkXG04yJVGqWZS329A+MMROY1SVLfAJ1V+3lTE0zZwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"tcp-header\"\n        title=\"tcp-header\"\n        src=\"/static/5641981c67f24b13b47c93084f71663e/37523/tcp-3way-handshake.png\"\n        srcset=\"/static/5641981c67f24b13b47c93084f71663e/5a46d/tcp-3way-handshake.png 300w,\n/static/5641981c67f24b13b47c93084f71663e/0a47e/tcp-3way-handshake.png 600w,\n/static/5641981c67f24b13b47c93084f71663e/37523/tcp-3way-handshake.png 720w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span>\nTCP헤더는\n<strong>write()단계</strong>\n어플리케이션 -> write()호출 -> 송수신데이터버퍼메모리에 저장 후 어플리케이션에 알림</p>\n<p>유진님 아직 쓰는중이에여</p>\n<h1>step3 Network를 통해 이동한다</h1>\n<p>참고:<br>\n<a href=\"https://www.aladin.co.kr/shop/wproduct.aspx?ItemId=163484025\">성공과 실패를 결정짓는 1%의 네트워크 원리</a><br>\n<a href=\"https://copycode.tistory.com/32\">ITstory</a><br>\n<a href=\"http://www.differencebetween.net/technology/internet/difference-between-tcp-and-ip/\">TCPvsIP</a><br>\n<a href=\"https://blog.naver.com/PostView.nhn?blogId=myca11&#x26;logNo=221389847130&#x26;categoryNo=24&#x26;parentCategoryNo=0&#x26;viewDate=&#x26;currentPage=1&#x26;postListTopCurrentPage=1&#x26;from=postView\">포트와소켓 차이점</a><br>\n<a href=\"https://evan-moon.github.io/2019/11/10/header-of-tcp/\">TCP헤더</a></p>","excerpt":"이 시리즈는 츠토무 토네가 쓴 성공과 실패를 결정하는 1%의 네트워크 원리를 읽고 공부한 내용을 정리한 것으로,\n유저가 브라우저에 URL을 입력한 후에 원했던 화면이 보이기까지 어떤 단계를 거치는지를 살펴본다. 유저가 브라우저에 URL을 입력한 후 벌어지는 일들 -…","frontmatter":{"date":"06 September, 2021","path":"/blog/post-1","title":"유저가 브라우저에 URL을 입력한 후 벌어지는 일들 -1"},"fields":{"readingTime":{"text":"14 min read"}}}},"pageContext":{}},"staticQueryHashes":["3649515864","63159454"]}